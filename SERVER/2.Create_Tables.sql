DROP TABLE MOVIES CASCADE CONSTRAINTS;
DROP TABLE VENUE CASCADE CONSTRAINTS;
DROP TABLE HALL CASCADE CONSTRAINTS;
DROP TABLE SHOW CASCADE CONSTRAINTS;
DROP TABLE SCHEDULE CASCADE CONSTRAINTS;
DROP TABLE SEATTYPE CASCADE CONSTRAINTS;
DROP TABLE MANAGER CASCADE CONSTRAINTS;
DROP TABLE CUSTOMER CASCADE CONSTRAINTS;
DROP TABLE TICKET CASCADE CONSTRAINTS;
DROP TABLE PAYMENT CASCADE CONSTRAINTS;


CREATE TABLE VENUE(
	VENUEID NUMBER(20),
	VENUENAME VARCHAR2(40),
	LOCATION VARCHAR2(20),
	PRIMARY KEY(VENUEID)
);


CREATE TABLE HALL(
	HALLID NUMBER(20),
	V_ID NUMBER(20),
	HALLNAME VARCHAR2(20),
	CATEGORY VARCHAR2(20),
	TOTALSEATS NUMBER(20),
	PRIMARY KEY(HALLID),
	FOREIGN KEY(V_ID) REFERENCES VENUE(VENUEID)
);

CREATE TABLE SHOW(
	SHOWID NUMBER(20),
	SHOWTIME VARCHAR2(20),
	PRIMARY KEY(SHOWID)
);

CREATE TABLE MOVIES(
	MOVIEID NUMBER(20),
	TITLE VARCHAR2(40),
	CATEGORY VARCHAR2(20),
	RELEASEDATE DATE,
	LANGUAGE VARCHAR2(10),
	PRIMARY KEY (MOVIEID)
);

CREATE TABLE SCHEDULE(
	V_ID NUMBER(20),
	H_ID NUMBER(20),
	S_ID NUMBER(20),
	M_ID NUMBER(20),
	SHOWDATE DATE,
	PRIMARY KEY (S_ID,V_ID,H_ID,SHOWDATE),
	FOREIGN KEY (V_ID) REFERENCES VENUE(VENUEID),
	FOREIGN KEY (H_ID) REFERENCES HALL(HALLID),
	FOREIGN KEY (S_ID) REFERENCES SHOW(SHOWID),
	FOREIGN KEY (M_ID) REFERENCES MOVIES(MOVIEID)
);


CREATE TABLE SEATTYPE(
	SEATTYPEID NUMBER(20),
	V_ID NUMBER(20),
	POSITION VARCHAR2(20),
	PRICE NUMBER(20),
	PRIMARY KEY(SEATTYPEID),
	FOREIGN KEY(V_ID) REFERENCES VENUE(VENUEID)
);



CREATE TABLE MANAGER(
	MANAGERID NUMBER(20),
	V_ID NUMBER(20),
	MANAGERNAME VARCHAR2(20),
	MANAGERPHONE VARCHAR2(20),
	PRIMARY KEY(MANAGERID),
	FOREIGN KEY (V_ID) REFERENCES VENUE(VENUEID)
);


CREATE TABLE CUSTOMER(
	CUSTOMERID NUMBER(20),
	CUSTOMERNAME VARCHAR2(20),
	CUSTOMERPHONE VARCHAR2(20),
	PRIMARY KEY (CUSTOMERID)
);


CREATE TABLE TICKET(
	TICKETID NUMBER(20),
	V_ID NUMBER(20),
	H_ID NUMBER(20),
	S_ID NUMBER(20),
	ST_ID NUMBER(20),
	M_ID NUMBER(20),
	M_DATE VARCHAR2(20),
	PRIMARY KEY(TICKETID),
	FOREIGN KEY(V_ID) REFERENCES VENUE(VENUEID),
	FOREIGN KEY(H_ID) REFERENCES HALL(HALLID),
	FOREIGN KEY(S_ID) REFERENCES SHOW(SHOWID),
	FOREIGN KEY(ST_ID) REFERENCES SEATTYPE(SEATTYPEID),
	FOREIGN KEY(M_ID) REFERENCES MOVIES(MOVIEID)
);


CREATE TABLE PAYMENT(
	PAYMENTID NUMBER(20),
	C_ID NUMBER(20),
	T_ID NUMBER(20),
	V_ID NUMBER(20),
	AMOUNT NUMBER(20),
	PAYMENTDATE DATE,
	PRIMARY KEY(PAYMENTID),
	FOREIGN KEY(C_ID) REFERENCES CUSTOMER(CUSTOMERID),
	FOREIGN KEY(T_ID) REFERENCES TICKET(TICKETID),
	FOREIGN KEY(V_ID) REFERENCES VENUE(VENUEID)
);


INSERT INTO VENUE VALUES(1,'STAR CINEPLEX, BASHUNDHARA CITY','PANTHAPATH');
INSERT INTO VENUE VALUES(2,'STAR CINEPLEX, SKS TOWER','MOHAKHALI');


INSERT INTO HALL VALUES(1,1,'REGULAR HALL 1','2D/3D',150);
INSERT INTO HALL VALUES(2,1,'REGULAR HALL 2','2D/3D',150);
INSERT INTO HALL VALUES(3,1,'REGULAR HALL 3','2D/3D',150);
INSERT INTO HALL VALUES(4,1,'STAR PREMIUM','2D/3D',  100);


INSERT INTO SHOW VALUES(1,'1 PM');
INSERT INTO SHOW VALUES(2,'2 PM');
INSERT INTO SHOW VALUES(3,'4 PM');
INSERT INTO SHOW VALUES(4,'5 PM');
INSERT INTO SHOW VALUES(5,'7 PM');
INSERT INTO SHOW VALUES(6,'8 PM');


INSERT INTO MOVIES VALUES (1,'SPIDER-MAN: NO WAY HOME','ACTION/ADVENTURE','17-DEC-21','ENGLISH');
INSERT INTO MOVIES VALUES (2,'MOONFALL','SCIENCE FICTION','04-MAR-22','ENGLISH');
INSERT INTO MOVIES VALUES (3,'RAAT JAGA PHOOL','ADVENTURE','31-DEC-21','BENGALI');
INSERT INTO MOVIES VALUES (4,'KAKABABUR PROTYABORTON','ADVENTURE','04-MAR-22','BENGALI');
INSERT INTO MOVIES VALUES (5,'SHOSHUR BARI JINDABADH 2','ROMANTIC','11-MAR-22','BENGALI');
INSERT INTO MOVIES VALUES (6,'OPERATION FORTUNE: RUSE DE GUERRE','SPY ACTION','18-MAR-22','ENGLISH');
INSERT INTO MOVIES VALUES (7,'JOHN WICK: CHAPTER 3','ACTION THRILLER','17-MAY-19','ENGLISH');


INSERT INTO SCHEDULE VALUES(1,4,1,1,'17-MAR-22'); 
INSERT INTO SCHEDULE VALUES(1,4,3,1,'17-MAR-22');
INSERT INTO SCHEDULE VALUES(1,4,5,1,'17-MAR-22');
INSERT INTO SCHEDULE VALUES(1,1,1,2,'17-MAR-2022');
INSERT INTO SCHEDULE VALUES(1,1,3,2,'17-MAR-2022'); 
INSERT INTO SCHEDULE VALUES(1,1,5,2,'17-MAR-2022');
INSERT INTO SCHEDULE VALUES(1,2,2,3,'17-MAR-22'); 
INSERT INTO SCHEDULE VALUES(1,2,4,4,'17-MAR-22');
INSERT INTO SCHEDULE VALUES(1,2,6,4,'17-MAR-22'); 
INSERT INTO SCHEDULE VALUES(1,3,1,5,'17-MAR-22');
INSERT INTO SCHEDULE VALUES(1,3,3,5,'17-MAR-22'); 
INSERT INTO SCHEDULE VALUES(1,3,5,6,'17-MAR-22');


INSERT INTO SEATTYPE VALUES(1,1,'FRONT',500);
INSERT INTO SEATTYPE VALUES(2,1,'MIDDLE',400);
INSERT INTO SEATTYPE VALUES(3,1,'BACK',350);


INSERT INTO MANAGER VALUES(1,1,'MPABC','01123');
INSERT INTO MANAGER VALUES(2,1,'MPDEF','01234');


INSERT INTO CUSTOMER VALUES(1,'ABC1','0123');
INSERT INTO CUSTOMER VALUES(2,'DEF1','0234');
INSERT INTO CUSTOMER VALUES(3,'GHI1','0345');

COMMIT;